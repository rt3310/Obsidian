## 파일 읽기

```cpp
#include <fstream>
#include <iostream>
#include <string>

int main() {
  // 파일 읽기 준비
	std::ifstream in("test.txt", std::ios::binary);
	std::string s;

	int x;
	if (in.is_open()) {
		in.read((char*)(&x), 4);
		std::cout << std::hex << x << std::endl;
	} else {
		std::cout << "파일을 찾을 수 없습니다!" << std::endl;
	}

	return 0;
}
```
`ifstream`객체를 생성할 때 생성자에 옵션으로 `binary` 형태로 받겠다고 명시할 수 있다.
이 말은 문자열 데이터를 받는게 아니라 그냥 이진 그대로의 값을 받아내겠다는 의미이다. 만일 아무 것도 명시하지 않는다면 문자열 형태로 데이터를 받는다.

## 파일에 쓰기

```cpp
#include <iostream>
#include <fstream>
#include <string>

int main() {
	// 파일 쓰기 준비
	std::ofstream out("test.txt", std::ios::app);

	std::string s;
	if (out.is_open()) {
		out << "이걸 쓰자~~";
	}

	return 0;
}
```

out 객체를 생성할 때 옵션으로 `app`을 주게 되면, 파일에 스트림을 연결할 때 기존 파일의 내용을 지우고 새로 쓰는 것이 아니라 그 뒤에 새로운 내용을 붙여쓰게 된다.

앞서 나왔던 `ios::binary`와 `ios::app`말고도 4개가 더 있다.

- `ios::ate` : 자동으로 파일 끝에서부터 읽기와 쓰기를 실시한다. (즉 파일을 열 때 위치 지정자가 파일 끝을 가리키고 있게 된다)
- `ios::trunc` : 파일 스트림을 열면 기존에 있던 내용들이 모두 지워진다. 기본적으로 `ofstream`객체를 생성할 때 이와 같은 설정으로 만들어진다.
- `ios::in`, `std::ios::out` : 파일에 입력을 할지 출력을 할지 지정하며, `ifstream`과 `ofstream`객체를 생성할 때 각각은 이미 설정되어 있다.
참고로 `ios::ate`와 `ios::app`은 비슷해 보이지만 차이가 있다면 `ios::app`의 경우 원본 파일의 내용을 무조건 적으로 보장하지만, `ate`는 위치 지정자를 그 이전으로 옮길 수 있다. 즉, `app`의 경우 파일 위치 지정자가 기존 파일의 끝이 시작점이라 생각하여 움직이며 `ate`의 경우 기존 파일을 포함해서 움직인다.

그렇다고 해서 `ate`를 이용해서 기존에 있는 파일 데이터 한 가운데에 무언가를 끼워 넣을 수 있는 것은 아니다.
```cpp
#include <fstream>
#include <iostream>
#include <string>

int main() {
	// 두 파일에는 모두 abc라고 써 있다.
	std::ofstream out("test.txt", std::ios::app);
	std::ofstream out2("test2.txt", std::ios::ate);

	out.seekp(3, std::ios::beg);
	out2.seekp(3, std::ios::beg);

	out << "추가";
	out2 << "추가";

	return 0;
}
```
성공적으로 컴파일 했다면
![[2206553D578624CF30D956.webp]]
`app`을 사용한 경우 위와 같이 abc 바로 뒤에 '추가' 문자열에 붙어 있는 것으로 나타난다. 비록 파일 위치 지정자를 앞에서 3칸 떨어진 곳으로 이동하였음에도, `app`모드로 읽었을 때 현재 파일은 빈 파일이라 생각되어 위치 지정자가 움직일 공간이 없기에, 실제로 위치 지정자는 움직이지 않고 출력되었다.
![[262BC340578624EC26E38B.webp]]
반면에 `ate`를 사용한 경우 앞에서 3칸 띄어진 곳에 '추가'라고 문자열이 출력되었지만 기존의 `abc`라는 데이터는 지워졌다. 즉, `ate`모드로 파일을 열게 되면 비록 스트림 위치 지정자는 움직여서 3칸 뒤에 출력되기는 하였지만 기존에 써져 있던 내용은 모두 지워진다.
