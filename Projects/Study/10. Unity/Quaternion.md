https://m.blog.naver.com/dj3630/221447943453
## Euler Angles

오일러가 고안한 개념으로 3차원 공간의 절대 좌표를 기준으로 물체의 회전을 측정하는 방식

### 장점
- X, Y, Z 세 개의 축을 기준으로 회전하기에 직관적이며 조작하기 쉽다.
- 180도가 넘는 회전도 표현할 수 있다.
### 한계
- 오일러 각을 계산하는데 드는 비용이 크다.
- 짐벌 락(Gimbal Lock)
	- 오일러 각을 이용한 회전은 먼저 회전한 축이 아직 회전하지 않은 축을 함께 회전시킨다.
	- 따라서 두 번째로 회전한 축의 결과로 인해 세 번째 축과 첫 번째 축이 겹쳐질 수 있는데, 이 상태를 짐벌 락이라고 하며, degree of freedom을 상실하게 된다(= 첫 번째, 세 번째 축 회전이 하나의 축을 기준으로 일어나기에 자유도 손실).

## Quaternion

- Quaternion은 4개의 수(x, y, z, w)로 이루어지며 각 성분은 축이나 각도를 의미하는게 아니라, 하나의 벡터(x, y, z)와 하나의 스칼라(w, roll을 표현)를 의미한다.
- 일반적으로 각 성분에 직접 접근 및 수정하지는 않는다.
	- Quaternion 수학을 완전히 이해하지 않은 채로 직접 수정하게 되면 의도한 방식으로 작동시키기 어렵기 때문이다.
- 오일러 각이 회전 순서에 기반하는 반면, Quaternion은 세 축을 동시에 회전시키기에 짐벌 락 현상이 발생하지 않는다(x, y, z 성분은 항상 동시에 변화한다)
- 벡터가 위치(position)임과 동시에 방향(direction)이듯이, Quaternion은 방향(orientation)임과 동시에 회전(rotation)이다.
- 벡터가 원점과 특정 위치를 비교함으로써 방향을 측정하듯이, Quaternion은 회전의 원점과 특정 방향을 비교함으로써 회전을 측정할 수 있다.
- Inspector view를 Debug 모드로 하면 Quaternion 성분을 볼 수 있다.
	- direction: 두 점을 이용해 나타낼 수 있는 방향: ~로 향하는 움직임
	- orientation: 세 가지 오일러 각 또는 Quaternion을 이용해 나타낼 수 있는 방향: ~를 향하고 있는 상태

### 장점
- 짐벌락 문제가 없다.
- 계산하는데 드는 비용이 적다.
### 한계
- Quaternion을 이용한 회전은 하나의 방향(orientation)에서 다른 방향으로 측정되기에 180도 보다 큰 회전을 표현할 수 없다.
- 직관적으로 이해하기 힘들다.

## Gimbal Lock

3개의 짐벌을 이용해 회전하는 3차원에서 두 개의 짐벌이 겹쳐질 경우 회전축 하나가 사라지는 현상
- 겹쳐진 두 개의 축을 더 이상 움직일 수 없게 된다는 의미가 아니라 그 두 개가 하나의 축으로 합쳐져서 각각 회전시켜도 같은 축을 기준으로 회전하게 된다는 의미이다.

물체가 회전하면 물체의 좌표계가 함께 회전하고 만약 회전하기 전의 좌표축과 회전한 후의 좌표축이 일치하면 데이터가 소실된다.

오일러 각은 X, Y, Z축으로의 회전 값이 같더라도 어떤 순서로 적용되는지에 따라 결과가 달라진다. 즉, 회전순서를 하이러키로 볼 수 있고 따라서 첫 번째로 회전하는 축이 하위 축들을 함께 회전시키게 된다.
마찬가지로 두 번째로 회전하는 축은 세 번째 축을 함께 움직이며 마지막으로 회전하는 축은 혼자만 회전한다. 이렇듯 회전결과가 축의 회전 순서에 의존하는 방식은 짐벌락 문제를 발생시킨다.
다시 말해, 회전 축 3개 중 2개가 하나의 평면상에 있게 되는 것이다.

오일러 체계에서의 회전은 회전순서에 기반하므로 어떤 축이 우선하는지 컴퓨터에게 알려줘야 한다.

## Quaternion In Animation

인스펙터에서 게임오브젝터의 회전 값을 X: 0, Y: 365, Z: 0으로 입력했을 때 이 값을 Quaternion으로 표현할 수 없으므로 재생을 누르면 오브젝트의 회전값이 X: 0, Y: 5, Z: 0(또는 기타 유사한 값)으로 변경되는 부작용이 있다.
'360도 전체 회전 더하기 5도'라는 개념을 이해하지 못하고 단순히 회전 결과와 동일한 방법으로 회전하도록 설정된 Quaternion으로 변환되기 때문이다.

스크립트에서 회전을 처리하는 경우 Quaternion 클래스와 이 클래스의 메서드를 이용해 회전 값을 만들고 수정해야 한다.
- 오일러 각을 관장하는 Quaternion 클래스 메서드가 있기에 오일러 각을 사용할 수도 있지만, 의도하지 않은 부작용이 발생할 수 있기에 정확한 원리를 알고 조작해야 한다.
- ex) Quaternion을 통해 오일러 값에 접근해서 수정한 후 다시 Quaternion을 변환해서 적용하면 문제가 발생한다. 따라서 오일러 각 관련 메서드는 값을 받아와서 수정하지 않고 바로 적용하는 방식으로만 사용해야 한다.

180도가 넘는 회전이 일어날 때 Quaternion의 특성에 유의해야 한다.
https://stackoverflow.com/questions/50311059/unity-rotate-an-object-in-axis-and-back-to-starting-point-in-the-same-direction
