데이터 무결성은 데이터의 **정확성, 일관성, 유효성**이 유지되는 것을 의미한다.
- 여기서 **정확성**이란 **중복이나 누락이 없는 상태**를 뜻한다.
- **일관성**은 **원인과 결과의 의미가 연속적으로 보장되어 변하지 않는 상태**를 뜻한다.

만약 데이터베이스에서 데이터 무결성 설계를 하지 않는다면
- 테이블에 중복된 데이터 존재
- 부모와 자식 데이터 간의 논리적 관계 깨짐
- 잦은 에러와 재개발 비용 발생
등과 같은 문제가 발생할 것이다.

그렇기 때문에 DBMS에서 데이터의 무결성이 유지되는 것은 중요한 사항이며, 주로 데이터에 적용되는 연산에 제한을 두어 데이터의 무결성을 유지한다.

## 데이터 무결성 제약조건의 종류와 개념

### 개체 무결성(Entity integrity)
기본 키 제약이라고도 하며, 테이블은 **기본 키**를 지정하고 **그에 따른 무결성 원칙을 지켜야** 하는 조건
- 기본 키(Primary Key)에는 **Null 값이 올 수 없음**
- 기본 키는 테이블 내에 **오직 하나의 값**만 존재해야 함 (하나의 테이블 내에 동일한 기본 키를 가진 레코드는 존재할 수 없음)

### 참조 무결성(Referential integrity)
**외래 키** 제약이라고도 하며, **테이블 간의 참조 관계**를 선언하는 제약조건
- 외래 키(Foreign Key)의 값은 **Null**이거나 **참조 릴레이션의 기본 키 값과 동일**해야 함
- 외래 키 속성은 **참조할 수 없는 값을 지닐 수 없음** (즉, 외래 키 속성 값이 상위 테이블의 인스턴스에 반드시 존재하거나 Null이어야 함)

### 도메인 무결성(Domain integrity)
테이블에 존재하는 **필드**의 무결성을 보장하기 위한 것으로 필드의 타입, Null 값 허용 등에 대한 사항을 정의하고 올바른 데이터가 입력되었는지 확인하는 조건

예를 들어, 주민등록번호 필드에 문자가 입력되는 경우엔 도메인의 무결성이 깨졌다고 볼 수 있음

### Null 무결성(Null integrity)
테이블의 **특정 속성 값이 Null이 될 수 없게** 하는 조건

### 고유 무결성(Unique integrity)
테이블의 특정 속성에 대해 **각 레코드들이 갖는 값들이 서로 달라야** 하는 조건

### 키 무결성(Key integrity)
하나의 테이블에는 **적어도 하나의 키**가 존재해야 하는 조건

### 관계 무결성(Relationship integrity)
테이블의 어느 한 레코드의 삽입 가능 여부 또는 한 테이블과 다른 테이블의 레코드들 사이의 관계에 대한 적절성 여부를 지정한 조건

### 업무 무결성(Business integrity)
기업에서 업무를 수행하는 방법이나 데이터를 처리하는 규칙

넓게 보면 엔티티 무결성이나 참조 무결성, 도메인 무결성도 업무 무결성에 포함될 수 있다.
- 예를 들어 ‘주문 금액이 3만 원 이상이면 배송비가 무료이다.’, ‘초회 보험료를 입금하지 않은 보험 계약은 효력이 없다’ 등이 업무 무결성이다.

업무 무결성은 범위가 넓어 주로 프로그램에서 체크한다.
- 업무 무결성을 물리적으로 강제하는 대표적인 방법에는 트리거가 존재한다.

## 규칙

### 입력 규칙
- Dependent 입력 규칙
    - 상위(부모) 엔티티에 해당하는 주 식별자 값이 존재할 때만 하위(자식) 엔티티의 외래 식별자에 입력 가능
- Automatic 입력 규칙
    - 상위(부모) 엔티티에 해당하는 주 식별자 값이 없을 때 상위(부모) 엔티티에 주 식별자를 생성하고 나서 하위(자식) 엔티티의 외래 식별자에 입력
- Default 입력 규칙
    - 상위(부모) 엔티티에 해당하는 주 식별자 값이 없을 때 하위(자식) 엔티티의 외래 식별자에 기본 값으로 입력.
    - 외래 식별자에 기본 값이 설정돼 있어야 함
- Nullify 입력 규칙
    - 상위(부모) 엔티티에 해당하는 주 식별자 값이 없을 때 하위(자식) 엔티티의 외래 식별자에 null 값으로 입력
    - 외래 식별자는 null 허용으로 설정해야 함

### 삭제 규칙
- Restrict 삭제 규칙
    - 상위(부모) 엔티티의 주 식별자를 삭제할 때, 같은 값이 하위(자식) 엔티티의 외래 식별자에 없을 때만 상위(부모) 엔티티의 주 식별자 삭제를 허용
- Cascade 삭제 규칙
    - 상위(부모) 엔티티의 주 식별자를 삭제할 때, 같은 값이 하위(자식) 엔티티의 외래 식별자에 존재하면 해당 값을 모두 삭제하고 나서 상위(부모) 엔티티의 주 식별자 삭제
- Default 삭제 규칙
    - 상위(부모) 엔티티의 주 식별자를 삭제할 때, 같은 값이 하위(자식) 엔티티의 외래 식별자에 존재하면 해당 값을 모두 기본 값으로 수정하고 나서 상위(부모) 엔티티의 주 식별자 삭제
- Nullify 삭제 규칙
    - 상위(부모) 엔티티의 주 식별자를 삭제할 때, 같은 값이 하위(자식) 엔티티의 외래 식별자에 존재하면 해당 값을 모두 널 값으로 수정하고 나서 상위(부모) 엔티티의 주 식별자 삭제

### 수정 규칙
- Restrict 수정 규칙
    - 상위(부모) 엔티티의 주 식별자를 업데이트할 때, 같은 값이 하위(자식) 엔티티의 외래 식별자에 없을 때만 상위(부모) 엔티티의 주 식별자를 수정
- Cascade 수정 규칙
    - 상위(부모) 엔티티의 주 식별자를 업데이트할 때, 같은 값이 하위(자식) 엔티티의 외래 식별자에 존재하면 해당 값을 모두 업데이트한 후에 상위(부모) 엔티티의 주 식별자를 수정

## 무결성 제약조건 장단점

### 장점
스키마를 정의할 때 일관성 조건을 오직 한 번만 명시하고, 데이터베이스가 갱신될 때 DBMS가 자동적으로 일관성 조건을 검사하므로 응용 프로그램들은 일관성 조건을 검사할 필요가 없음

### 단점
프로그래밍 작업이 훨씬 복잡해지고, 무결성 제약조건을 반복해서 구현해야 하고, 무결성 제약조건들 간에 서로 충돌이 발생할 수 있음