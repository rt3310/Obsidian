## 1. 이해

### 1-1. 메시지 큐(MessageQuque : MQ)

**kafka**와 **rabbitMQ**를 이해하기 위해선 우선 **메시지 큐**에 대한 이해가 선제적으로 필요하다.

> **메시지 큐(MessageQueue : MQ)란?**  
> 프로세스 또는 프로그램 인스턴스가 데이터를 서로 교환할 때 사용하는 통신 방법. 더 큰 의미로는 `메시지 지향 미들웨어(MOM)를 구현한 시스템`을 의미한다.

**MQ**에 대한 동작원리를 그림으로 표현한다면 아래와 같다.
![[Pasted image 20260215033833.png]]

> [!info] 용어 정리
> 1. producer: 정보를 제공하는 자  
> 2. consumer: 정보를 제공받아서 사용하려는 자  
> 3. Queue: `producer`의 데이터를 임시 저장 및 `consumer`에 제공하는 곳

우리가 주목해야 할 부분은 `queue` 이다.  
**MQ**에서 메시지는 End-Point 간에 직접적으로 통신하지 않고 중간에 `queue`를 통해 중개된다는 점이다.

메시지 흐름에 대해 다시 한번 정리하자면 아래와 같다.
#### 메시지 흐름 순서
1. 메시지 전송  
2. `producer`는 해당 메시지를 `queue`에 추가  
3. 해당 메시지는 `consumer`가 메시지를 검색하고 이를 사용하기 위한 작업 전까지 임시 저장  
4. `consumer`에 의해 호출  
5. 해당 메시지는 `queue`에서 삭제

기존 방식을 떠나 위와 같은 흐름을 갖는 **MQ**의 장점은 아래와 같다.
#### MQ 장점  
1. **비동기**: `queue`라는 임시 저장소가 있기 때문에 나중에 처리 가능  
2. **낮은 결합도**: 애플리케이션과 분리  
3. **확장성**: `producer` or `consumer` 서비스를 원하는대로 확장할 수 있음  
4. **탄력성**: `consumer` 서비스가 다운되더라도 애플리케이션이 중단되는 것은 아니며 메시지는 지속하여 `MQ`에 남아있다.  
5. **보장성**: `MQ`에 들어간다면 결국 모든 메시지가 `consumer` 서비스에게 전달된다는 보장을 제공한다.

